@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Background layers */
    --bg-deep: 222 47% 7%;
    --bg-card: 224 30% 11%;
    --border: 224 25% 21%;

    /* Text */
    --text: 214 32% 91%;
    --text-dim: 215 16% 47%;

    /* Model identity — A: amber/gold, B: cyan/teal */
    --model-a: 38 92% 50%;      /* #F59E0B */
    --model-b: 192 91% 43%;     /* #06B6D4 */

    /* Brand accent */
    --accent: 263 70% 58%;      /* #8b5cf6 */

    /* Active model color — driven by Theater, defaults to accent */
    --color-active: #8b5cf6;

    /* Glow tokens */
    --glow-a: 0 0 24px rgba(245, 158, 11, 0.45);
    --glow-b: 0 0 24px rgba(6, 182, 212, 0.45);
    --glow-accent: 0 0 24px rgba(139, 92, 246, 0.35);

    /* Typography */
    --font-display: 'Orbitron', sans-serif;
    --font-ui: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --font-mono: 'JetBrains Mono', 'Fira Mono', monospace;
  }

  h1, h2 {
    font-family: var(--font-display);
    letter-spacing: 0.08em;
    text-transform: uppercase;
  }
}

body {
  margin: 0;
  font-family: var(--font-ui);
  background-color: #020817;
  color: #e2e8f0;
  -webkit-font-smoothing: antialiased;
}

/* Nav border reacts to active model color in Theater */
nav {
  transition: border-bottom-color 0.8s ease;
}
html[data-active-model="a"] nav {
  border-bottom-color: rgba(245, 158, 11, 0.45) !important;
}
html[data-active-model="b"] nav {
  border-bottom-color: rgba(6, 182, 212, 0.45) !important;
}

/* Dark scrollbar */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: #020817; }
::-webkit-scrollbar-thumb { background: #2a3146; border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: #64748b; }

/* ─── Film grain noise overlay ────────────────────────────────────────────── */
@keyframes noise-shift {
  0%   { transform: translate(0, 0); }
  25%  { transform: translate(-3%, -1%); }
  50%  { transform: translate(-1%, 3%); }
  75%  { transform: translate(3%, -2%); }
  100% { transform: translate(0, 0); }
}

.noise-layer {
  position: fixed;
  inset: -20%;
  width: 140%;
  height: 140%;
  pointer-events: none;
  z-index: 100;
  opacity: 0.038;
  animation: noise-shift 0.12s steps(1) infinite;
  background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='300' height='300'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/></filter><rect width='300' height='300' filter='url(%23n)'/></svg>");
}

/* ─── HUD card scan-line texture ──────────────────────────────────────────── */
.hud-card {
  background-image: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(255, 255, 255, 0.013) 2px,
    rgba(255, 255, 255, 0.013) 4px
  );
}


/* ─── Neural terminal card ────────────────────────────────────────────────── */
.neural-card {
  position: relative;
  background-color: rgba(15, 20, 40, 0.82);
  border: 1px solid rgba(139, 92, 246, 0.18);
  border-radius: 6px;
  backdrop-filter: blur(8px);
  transition: border-color 0.25s ease, background-color 0.25s ease;
  background-image: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(255, 255, 255, 0.010) 2px,
    rgba(255, 255, 255, 0.010) 4px
  );
}
.neural-card:hover {
  border-color: rgba(139, 92, 246, 0.45);
  background-color: rgba(20, 26, 52, 0.88);
}
.neural-card--custom {
  border-style: dashed;
}
.neural-card-bar {
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(139,92,246,0.7) 40%, rgba(6,182,212,0.5) 70%, transparent);
  border-radius: 6px 6px 0 0;
  opacity: 0.8;
  transition: opacity 0.25s ease;
}
.neural-card:hover .neural-card-bar { opacity: 1; }
.neural-card-bar--dim { opacity: 0.35; }
.neural-icon {
  font-size: 1.5rem;
  line-height: 1;
  filter: drop-shadow(0 0 6px rgba(139, 92, 246, 0.25));
}

/* ─── Neural terminal rows (Gallery log format) ───────────────────────────── */
.neural-row {
  position: relative;
  background-color: rgba(15, 20, 40, 0.72);
  border: 1px solid rgba(139, 92, 246, 0.10);
  border-left: 3px solid rgba(100, 116, 139, 0.35);
  border-radius: 4px;
  backdrop-filter: blur(6px);
  transition: border-color 0.2s ease, background-color 0.2s ease;
  overflow: hidden;
  cursor: pointer;
}
.neural-row:hover {
  border-color: rgba(139, 92, 246, 0.35);
  background-color: rgba(20, 26, 52, 0.85);
}
.neural-row--running  { border-left-color: rgba(34, 197, 94, 0.85); }
.neural-row--completed { border-left-color: rgba(139, 92, 246, 0.85); }
.neural-row--failed   { border-left-color: rgba(239, 68, 68, 0.75); }
.neural-row--pending  { border-left-color: rgba(100, 116, 139, 0.5); }

/* ─── Status dots ─────────────────────────────────────────────────────────── */
.status-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  flex-shrink: 0;
}
.status-dot--running   { background: #22c55e; box-shadow: 0 0 6px rgba(34,197,94,0.7); animation: pulse 2s ease-in-out infinite; }
.status-dot--completed { background: #8b5cf6; box-shadow: 0 0 4px rgba(139,92,246,0.5); }
.status-dot--failed    { background: #ef4444; }
.status-dot--pending   { background: #64748b; }

/* ─── Neural action buttons ───────────────────────────────────────────────── */
.neural-btn {
  font-family: var(--font-mono);
  font-size: 10px;
  letter-spacing: 0.08em;
  padding: 3px 10px;
  border: 1px solid rgba(139,92,246,0.25);
  border-radius: 3px;
  color: rgba(139,92,246,0.7);
  background: transparent;
  cursor: pointer;
  transition: all 0.15s ease;
  text-transform: uppercase;
}
.neural-btn:hover {
  border-color: rgba(139,92,246,0.65);
  color: #8b5cf6;
  background: rgba(139,92,246,0.08);
}
.neural-btn--active {
  border-color: rgba(34,197,94,0.35);
  color: rgba(34,197,94,0.8);
}
.neural-btn--active:hover {
  border-color: rgba(34,197,94,0.7);
  color: #22c55e;
  background: rgba(34,197,94,0.08);
}

/* ─── Provider panels (Settings left-stripe) ──────────────────────────────── */
.neural-provider {
  position: relative;
  background-color: rgba(15, 20, 40, 0.72);
  border: 1px solid rgba(139,92,246,0.10);
  border-left: 3px solid;
  border-radius: 4px;
  backdrop-filter: blur(6px);
  overflow: hidden;
  background-image: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(255, 255, 255, 0.007) 2px,
    rgba(255, 255, 255, 0.007) 4px
  );
}
.neural-provider--ok  { border-left-color: rgba(34,197,94,0.8); }
.neural-provider--err { border-left-color: rgba(239,68,68,0.65); }

/* ─── Form section separators ─────────────────────────────────────────────── */
.neural-section-label {
  font-family: var(--font-mono);
  font-size: 9px;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: rgba(139,92,246,0.5);
  border-bottom: 1px solid rgba(139,92,246,0.1);
  padding-bottom: 4px;
  margin-bottom: 12px;
}

/* ─── BABEL wordmark shimmer ──────────────────────────────────────────────── */
@keyframes babel-shimmer {
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* --- Sprite avatar animations -------------------------------------------- */
@keyframes sprite-float {
  0%, 100% { transform: translateY(0); }
  50%       { transform: translateY(-4px); }
}
@keyframes sprite-shake {
  0%, 100% { transform: translateX(0); }
  20%      { transform: translateX(-3px); }
  40%      { transform: translateX(3px); }
  60%      { transform: translateX(-3px); }
  80%      { transform: translateX(3px); }
}
@keyframes sprite-scan {
  0%   { transform: translateX(-46px); opacity: 0.75; }
  80%  { transform: translateX(46px);  opacity: 0.75; }
  100% { transform: translateX(46px);  opacity: 0; }
}
@keyframes sprite-talk {
  0%, 100% { opacity: 1; }
  50%      { opacity: 0.15; }
}
@keyframes sprite-cursor-blink {
  0%, 100% { opacity: 1; }
  50%      { opacity: 0; }
}
@keyframes sprite-win-pulse {
  0%, 100% { filter: brightness(1);   transform: translateY(0); }
  25%      { filter: brightness(1.8); transform: translateY(-6px); }
  50%      { filter: brightness(1.4); transform: translateY(-3px); }
  75%      { filter: brightness(1.6); transform: translateY(-5px); }
}
.sprite-float    { animation: sprite-float 3s ease-in-out infinite; }
.sprite-shake    { animation: sprite-shake 0.4s ease-in-out infinite; }
.sprite-scan-bar { animation: sprite-scan 1.5s ease-in-out infinite; }
.sprite-talk-eye { animation: sprite-talk 0.35s ease-in-out infinite; }
.sprite-cursor   { animation: sprite-cursor-blink 0.7s ease-in-out infinite; }
.sprite-win      { animation: sprite-win-pulse 0.6s ease-in-out 4; }

/* Arena stage scanlines */
.arena-scanlines {
  background-image: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 3px,
    rgba(255, 255, 255, 0.012) 3px,
    rgba(255, 255, 255, 0.012) 4px
  );
}
